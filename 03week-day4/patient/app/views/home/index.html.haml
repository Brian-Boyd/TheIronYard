%h1 The Iron Yard Hospital & Care Center

= link_to "Add New Patient", new_patient_path

%h4 These are the patients waiting

.list
  %table.table-hover
    %tr
      %th Name
      %th Show
      %th Edit
      %th Action
    - @patients_processing.each do |patient|
      %tr
        %td
          =patient.name
          (#{patient.workflow_state})
        %td
          =link_to 'Show Patient', patient_path(patient), :class => 'action tac'
        %td
          =link_to 'Edit Patient', edit_patient_path(patient), :class => 'action tac'
        %td
          - if patient.workflow_state == 'waiting'
            = link_to "Doctor", doctor_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Xray", xray_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Surgery", surgery_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Leaving", leaving_patient_path(patient), :class => 'action tac', method: :patch
          - elsif patient.workflow_state == 'doctor'
            = link_to "Xray", xray_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Surgery", surgery_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Pay Bill", billpay_patient_path(patient), :class => 'action tac', method: :patch
          - elsif patient.workflow_state == 'xray'
            = link_to "Doctor", doctor_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Surgery", surgery_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Pay Bill", billpay_patient_path(patient), :class => 'action tac', method: :patch
          - elsif patient.workflow_state == 'surgery'
            = link_to "Doctor", doctor_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Xray", xray_patient_path(patient), :class => 'action tac', method: :patch
            = link_to "Pay Bill", billpay_patient_path(patient), :class => 'action tac', method: :patch
          - elsif patient.workflow_state == 'billpay'
            = link_to "Leaving", leaving_patient_path(patient), :class => 'action tac', method: :patch
          - elsif patient.workflow_state == 'leaving'
            = link_to "Gone", patients_completed_patient_path(patient), :class => 'action tac', method: :patch
